<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<head>
<title>Banano</title>
<link rel="stylesheet" type="text/css" href="index.css">
</head>
<body onload="onLoad();">
  <div id="banano"></div>
  <ol>
    <li><img class="small_image" src="https://i.imgur.com/Remo7td.png" /></li>
  </ol>
  <table>
    <tr>
      <th>Id</th>
      <th>Name</th>
    </tr>
    <tr>
      <td>1</td>
      <td>Alpha</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Beta</td>
    </tr>
  </table>
  <script>
	  const loadJson = () => {
        const xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            loadJsonCallback(this.response);
          }
        }
        xhttp.responseType = 'json';
        xhttp.open('GET', 'index.json', true);
        xhttp.send();
      }

      const loadJsonCallback = (json) => {
        const banano = document.getElementById('banano');
        
        const header = document.createTextNode('Coranos Bananos');
        
        banano.appendChild(header);

        const table = document.createElement('table');      
        banano.appendChild(table);
        
        const tableHeaderRow = document.createElement('tr');
        table.appendChild(tableHeaderRow);

        if(json.length == 0) {
          return;
        }
        
        for (const [key, value] of Object.entries(json[0])) {
          const tableHeaderElt = document.createElement('th');
          tableHeaderRow.appendChild(tableHeaderElt);
          tableHeaderElt.appendChild(document.createTextNode(key));
        }
        
        json.forEach((jsonElt,jsonEltIx) => {
          const tableDataRow = document.createElement('tr');
          table.appendChild(tableDataRow);

          for (const [key, value] of Object.entries(jsonElt)) {
            const tableDataElt = document.createElement('td');
            tableDataRow.appendChild(tableDataElt);
            tableDataElt.appendChild(document.createTextNode(value));
          }
        });
      }

      const onLoad = () => {
        loadJson();
      }
    </script>
</body>
</html>
